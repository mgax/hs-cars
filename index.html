<!doctype html>
<meta charset="utf8">
<style>
html, body, #app { margin: 0; height: 100%; }
</style>
<body>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

<div id="app"></div>

<script type="text/babel">
class App extends React.Component {

  constructor() {
    super()
    this.state = {}
  }

  componentDidMount() {
    this.loadPage('/api/v1/car/?format=json');
  }

  async loadPage(url) {
    let resp = await fetch(url)
    let data = await resp.json()
    this.setState({data})
  }

  render() {
    if(! this.state.data) return <p>loading...</p>
    let {meta, objects} = this.state.data

    let next = (e) => {
      this.loadPage(meta.next)
    }

    let previous = (e) => {
      this.loadPage(meta.previous)
    }

    return (
      <div>
        <ul>
          {objects.map((car) => {
            return (
              <li key={car.id}>{car.name}</li>
            )
          })}
        </ul>
        <p>
          {meta.previous && <button onClick={previous}>previous</button>}
          {meta.next && <button onClick={next}>next</button>}
        </p>
      </div>
    )
  }
}

ReactDOM.render(<App/>, document.querySelector('#app'))
</script>
